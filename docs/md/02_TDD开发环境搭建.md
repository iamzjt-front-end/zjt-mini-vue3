# 02_TDDå¼€å‘ç¯å¢ƒæ­å»º

ä»ç°åœ¨å¼€å§‹ï¼Œæ­£å¼çš„è¿›è¡Œ `mini-vue`çš„å¼€å‘ã€‚

é¦–å…ˆæ­å»º `TDD`ï¼ˆæµ‹è¯•é©±åŠ¨å¼€å‘ï¼‰å¼€å‘ç¯å¢ƒï¼Œæœ¬é¡¹ç›®é‡‡ç”¨ `jest`ä½œä¸ºå•å…ƒæµ‹è¯•æ¡†æ¶ï¼Œé‡‡ç”¨ `typescript`ä½œä¸ºä¸»è¦å¼€å‘è¯­è¨€ï¼Œé‡‡ç”¨ `yarn`
ä½œä¸ºåŒ…ç®¡ç†å·¥å…·ã€‚

> è¿™é‡Œä¹Ÿæµ…æµ…è¯´ä¸€ä¸‹`TDD`çš„å¥½å¤„ï¼š
>
> å›é¡¾è¿‡å¾€ï¼š
>
> 1. éœ€æ±‚åˆ†æï¼Œæƒ³ä¸æ¸…æ¥šç»†èŠ‚ï¼Œç®¡ä»–å‘¢ï¼Œå…ˆå¼€å§‹å†™ï¼Œä¸€æŠŠæ¢­å“ˆã€‚
>
> 2. å‘ç°éœ€æ±‚ç»†èŠ‚ä¸æ˜ç¡®ï¼Œå†å»è·Ÿä¸šåŠ¡äººå‘˜ç¡®è®¤ï¼Œè®¨è®ºï¼Œå¥½çš„æƒ…å†µä¸‹æ”¹ä¸€å°ç‚¹ï¼Œä¸å¥½çš„æƒ…å†µä¸‹ï¼Œç°æœ‰ä»£ç è®¾è®¡æ¨ç¿»ï¼Œå®Œå…¨é‡æ„ã€‚
>
> 3. ç„¶åå†ç¡®è®¤å¥½å‡ æ¬¡ç»ˆäºå†™å®Œæ‰€æœ‰é€»è¾‘ã€‚
>
> 4. è¿è¡Œèµ·æ¥æµ‹è¯•ä¸€ä¸‹ï¼Œå•Šï¼Œæœç„¶ä¸å·¥ä½œå‘¢ï¼Œè°ƒè¯•ã€‚
>
> 5. è°ƒè¯•å¥½ä¹…ç»ˆäºå·¥ä½œäº†ã€‚
>
> 6. è½¬æµ‹è¯•ï¼Œ`QA` æµ‹å‡º `bug`ï¼Œ`debug`ï¼Œ æ‰“è¡¥ä¸ã€‚
>
> 7. ç»ˆäºï¼Œä»£ç å¯ä»¥å·¥ä½œäº†ã€‚
>
> 8. æ²¡æœ‰è§„åˆ’ï¼Œè¿˜æ­¥å­è¿ˆå¾—å¤ªå¤§ï¼Œå°±å¯¼è‡´æ–¹æ³•æ‹†åˆ†çš„ä¸å¤Ÿç»†ï¼Œæ‰€ä»¥å°±å¯¼è‡´äº†å¾ˆå¤šè¿‡ç¨‹å¼çš„ä»£ç ã€‚
>
> 9. ä¸€çœ‹ä»£ç çƒ‚çš„åƒå¨ğŸ’©ï¼Œä¸æ•¢åŠ¨ï¼ŒåŠ¨äº†è¿˜å¾—æ‰‹å·¥æµ‹è¯•ï¼Œè¿˜å¾—è®© QA æµ‹è¯•ï¼Œè¿˜å¾—åŠ ç­...
>
> 10. å…´è‡´ä¸å¥½ï¼Œé¡¹ç›®ç´§æ€¥ï¼Œå°±éšå®ƒå»äº†ï¼Œåæ­£ç¥–ä¼ ä»£ç ã€‚å¶å°”æœ‰æ—¶é—´ï¼Œçªå‘å…´è‡´æ¥äº†ï¼Œé‡æ„ä¸€ä¸‹ã€‚ç»“æœé‡æ„åè¦ä¹ˆæ‡’å¾—æµ‹è¯•ï¼Œè¦ä¹ˆæµ‹è¯•ä¸å½»åº•ï¼Œç„¶åç»å¸¸å¼•å‘å‡ºå…¶ä»–éšæ€§bugã€‚

> æ˜¯ä¸æ˜¯ä½ çš„ç°çŠ¶ï¼ŸğŸ˜… æƒ³è¦æ‰“ç ´ç°çŠ¶å—ï¼Ÿé‚£å°±åŠ å…¥`å‰ƒåˆ€å…š`å§ã€‚`jest`ã€`vitest`ã€`cypress`ä»»ä½ æŒ‘é€‰ã€‚
>
> ä¸å¥½æ„æ€ï¼Œåé¢˜äº†ï¼Œå›å½’æ­£é¢˜ã€‚
>
> `TDD`çš„å…¨ç§°æ˜¯`æµ‹è¯•é©±åŠ¨å¼€å‘`ï¼Œæ˜¯ä¸€ç§æ—¨åœ¨æå‡ä»£ç è´¨é‡çš„å¼€å‘å®è·µã€‚è¿™ç§å¼€å‘å®è·µçš„ä¸»è¦æ­¥éª¤æ˜¯åœ¨ç¼–å†™äº§å“ä»£ç ä¹‹å‰ï¼Œå…ˆç¼–å†™å•å…ƒæµ‹è¯•ä»£ç ï¼Œç„¶åå†ç”±æµ‹è¯•ä»£ç æ¥å†³å®šå†™ä»€ä¹ˆäº§å“ä»£ç ï¼Œå…¶ç›®çš„æ˜¯å–å¾—å¿«é€Ÿåé¦ˆï¼Œå¹¶ä½¿ç”¨`illustrate the main line`æ–¹æ³•æ¥æ„å»ºç¨‹åºã€‚
>
> æµ‹è¯•é©±åŠ¨å¼€å‘æ˜¯æˆ´ä¸¤é¡¶å¸½å­æ€è€ƒçš„å¼€å‘æ–¹å¼ï¼š
>
> å…ˆæˆ´ä¸Š`å®ç°åŠŸèƒ½`çš„å¸½å­ï¼Œåœ¨æµ‹è¯•çš„è¾…åŠ©ä¸‹ï¼Œå¿«é€Ÿå®ç°å…¶åŠŸèƒ½ï¼›
>
> å†æˆ´ä¸Š`é‡æ„`çš„å¸½å­ï¼Œåœ¨æµ‹è¯•çš„ä¿æŠ¤ä¸‹ï¼Œé€šè¿‡å»é™¤å†—ä½™çš„ä»£ç ï¼Œæé«˜ä»£ç è´¨é‡ã€‚
>
> æµ‹è¯•é©±åŠ¨ç€æ•´ä¸ªå¼€å‘è¿‡ç¨‹ï¼šé¦–å…ˆï¼Œé©±åŠ¨ä»£ç çš„è®¾è®¡å’ŒåŠŸèƒ½çš„å®ç°ï¼›å…¶åï¼Œé©±åŠ¨ä»£ç çš„å†è®¾è®¡å’Œé‡æ„ã€‚

### ä¸€ã€ç¯å¢ƒæ­å»º

1. åˆå§‹åŒ–é¡¹ç›®

   ```shell
   # ç”Ÿæˆé»˜è®¤çš„package.json
   yarn init -y
   ```

2. å®‰è£…å’Œé…ç½® `typescript`

   ```shell
   # å®‰è£…typescript
   yarn add typescript -D
   # ç”Ÿæˆé…ç½®æ–‡ä»¶tsconfig.json
   npx tsc --init
   ```

3. å¼•å…¥ `jest`

   ```shell
   yarn add jest @types/jest -D
   ```

4. é…ç½® `tsconfig.json`ï¼ˆè¦åŒ…å«çš„ç±»å‹å£°æ˜æ–‡ä»¶ååˆ—è¡¨ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢å®‰è£…çš„@types/jestï¼‰

   ```json
   {
      "types": ["jest"]  
   }
   ```

### äºŒã€å®šä¹‰ä¸€ä¸‹ç›®å½•ç»“æ„

```
zjt-mini-vue3  
â”‚  
â”œâ”€â”€ docs // ç¬”è®°  
â”‚ â”œâ”€â”€ images  
â”‚ â””â”€â”€ md  
â”œâ”€â”€ node_modules  
â”œâ”€â”€ examples // æ¡ˆä¾‹  
â”‚ â”œâ”€â”€ rollup-vue // sfcæ‰“åŒ…ä½“éªŒ  
â”‚ â””â”€â”€ testCase // æµ‹è¯•ç”¨ä¾‹  
â”œâ”€â”€ src  
â”‚ â””â”€â”€ reactivity  
â”‚ â”œâ”€â”€ tests  
â”‚ â”‚ â””â”€â”€ index.spec.ts // jestå•æµ‹  
â”‚ â””â”€â”€ index.ts  
â”œâ”€â”€ .gitignore  
â”œâ”€â”€ babel.config.js  
â”œâ”€â”€ LICENSE  
â”œâ”€â”€ package.json  
â”œâ”€â”€ README.md  
â”œâ”€â”€ tsconfig.json  
â””â”€â”€ yarn.lock
```

1. index.tsç¼–å†™ä¸€ä¸ªæ–¹æ³•ç”¨äºæµ‹è¯•

   ```ts
   export function add(a, b) {
      return a + b;
   }
   ```

2. index.spec.tsç¼–å†™ç¬¬ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹

   ```ts
   import { add } from '../index';

   it('init', function () {
      expect(add(1, 1)).toBe(2);
   });
   ```

3. é…ç½®package.jsonçš„script

   ```json
   {
      "scripts": {
         "test": "jest"
      }
   }
   ```

### ä¸‰ã€æµ‹è¯•

   ```shell
   yarn test
   ```

<img src="https://iamzjt-1256754140.cos.ap-nanjing.myqcloud.com/images/202211030753632.png" width="666" alt="02_jestç¬¬ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹æµ‹å››ç»“æœ"/>